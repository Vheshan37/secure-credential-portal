generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model request {
  id          Int        @id @default(autoincrement())
  name        String     @db.VarChar(50)
  designation String     @db.VarChar(50)
  contact_no  String     @db.VarChar(12)
  company     String     @db.VarChar(50)
  service     String     @db.VarChar(50)
  description String     @db.Text
  date_time   DateTime   @db.DateTime(0)
  circuit_no  String     @db.VarChar(20)
  user_id     Int
  status_id   Int
  status      status     @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_request_status1")
  user        user       @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_request_user1")
  response    response[]

  @@index([user_id], map: "fk_request_user1_idx")
  @@index([status_id], map: "fk_request_status1_idx")
}

model response {
  id           Int            @id @default(autoincrement())
  used_time    DateTime       @db.DateTime(0)
  exp_time     DateTime       @db.DateTime(0)
  username     String?        @db.VarChar(255)
  password     String?        @db.VarChar(255)
  request_id   Int
  status_id    Int
  request      request        @relation(fields: [request_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_response_request1")
  status       status         @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_response_status1")
  response_otp response_otp[]

  @@index([request_id], map: "fk_response_request1_idx")
  @@index([status_id], map: "fk_response_status1_idx")
}

model response_otp {
  id          Int      @id @default(autoincrement())
  otp         String   @db.VarChar(6)
  response_id Int
  response    response @relation(fields: [response_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_response_otp_response1")

  @@index([response_id], map: "fk_response_otp_response1_idx")
}

// User table as a prisma model
model user {
  id         Int       @id @default(autoincrement())
  email      String    @unique(map: "email_UNIQUE") @db.VarChar(100)
  status     String    @db.VarChar(10)
  otp        String?   @db.VarChar(6)
  circuit_id String    @db.VarChar(45)
  request    request[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model status {
  id       Int        @id @default(autoincrement())
  status   String     @unique(map: "status") @db.VarChar(45)
  request  request[]
  response response[]
}
